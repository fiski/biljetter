import { EventWithRelations, Venue, Artist, Genre } from '@/types'

// ── Venues ──────────────────────────────────────────────────────────────────

export const mockVenues: Venue[] = [
  {
    id: 'v1',
    name: 'Pustervik',
    slug: 'pustervik',
    address: 'Järntorget 12',
    city: 'Göteborg',
    capacity: 350,
    coordinates: { lat: 57.7002, lng: 11.9535 },
    websiteUrl: 'https://pustervik.nu',
  },
  {
    id: 'v2',
    name: 'Nefertiti',
    slug: 'nefertiti',
    address: 'Hvitfeldtsplatsen 6',
    city: 'Göteborg',
    capacity: 250,
    coordinates: { lat: 57.7045, lng: 11.9680 },
    websiteUrl: 'https://nefertiti.se',
  },
  {
    id: 'v3',
    name: 'The Universe',
    slug: 'the-universe',
    address: 'Esperantoplatsen 3',
    city: 'Göteborg',
    capacity: 1200,
    coordinates: { lat: 57.7010, lng: 11.9650 },
  },
  {
    id: 'v4',
    name: 'Haga Lekplats',
    slug: 'haga-lekplats',
    address: 'Haga Nygata 13',
    city: 'Göteborg',
    capacity: 150,
    coordinates: { lat: 57.6990, lng: 11.9560 },
  },
  {
    id: 'v5',
    name: 'Farm',
    slug: 'farm',
    address: 'Kungsgatan 12',
    city: 'Göteborg',
    capacity: 200,
    coordinates: { lat: 57.7040, lng: 11.9730 },
  },
]

// ── Genres ───────────────────────────────────────────────────────────────────

export const mockGenres: Genre[] = [
  { id: 'g1', name: 'Rock', slug: 'rock', color: '#E74C3C' },
  { id: 'g2', name: 'Electronic', slug: 'electronic', color: '#3498DB' },
  { id: 'g3', name: 'Jazz', slug: 'jazz', color: '#9B59B6' },
  { id: 'g4', name: 'Indie', slug: 'indie', color: '#2ECC71' },
  { id: 'g5', name: 'Folk', slug: 'folk', color: '#F39C12' },
  { id: 'g6', name: 'Hip Hop', slug: 'hip-hop', color: '#95A5A6' },
]

// ── Artists ──────────────────────────────────────────────────────────────────

export const mockArtists: Artist[] = [
  {
    id: 'a1',
    name: 'Viper!!',
    slug: 'viper',
    imageUrl: '/images/artists/viper.jpg',
    spotifyListeners: 123087,
  },
  {
    id: 'a2',
    name: 'Blazers',
    slug: 'blazers',
    imageUrl: '/images/artists/blazers.jpg',
    spotifyListeners: 45200,
  },
  {
    id: 'a3',
    name: 'Sheep Boi',
    slug: 'sheep-boi',
    imageUrl: '/images/artists/sheep-boi.jpg',
    spotifyListeners: 28500,
  },
  {
    id: 'a4',
    name: 'Front 242',
    slug: 'front-242',
    imageUrl: '/images/artists/front-242.jpg',
    spotifyListeners: 150000,
  },
  {
    id: 'a5',
    name: 'Hästpansen',
    slug: 'hastpansen',
    imageUrl: '/images/artists/hastpansen.jpg',
    spotifyListeners: 67300,
  },
  {
    id: 'a6',
    name: 'Dimma',
    slug: 'dimma',
    imageUrl: '/images/artists/dimma.jpg',
    spotifyListeners: 91200,
  },
  {
    id: 'a7',
    name: 'Koltrast',
    slug: 'koltrast',
    imageUrl: '/images/artists/koltrast.jpg',
    spotifyListeners: 34100,
  },
  {
    id: 'a8',
    name: 'Svarta Björken',
    slug: 'svarta-bjorken',
    imageUrl: '/images/artists/svarta-bjorken.jpg',
    spotifyListeners: 12800,
  },
  {
    id: 'a9',
    name: 'Glasklart',
    slug: 'glasklart',
    imageUrl: '/images/artists/glasklart.jpg',
    spotifyListeners: 55600,
  },
  {
    id: 'a10',
    name: 'Eldkvarn',
    slug: 'eldkvarn',
    imageUrl: '/images/artists/eldkvarn.jpg',
    spotifyListeners: 210000,
  },
]

// ── Dynamic date helpers ────────────────────────────────────────────────────

const now = new Date()
const year = now.getFullYear()
const month = now.getMonth() // 0-indexed current month
const today = now.getDate()

function d(monthOffset: number, day: number, hour: number, minute = 0): Date {
  return new Date(year, month + monthOffset, day, hour, minute)
}

function slug(artist: string, monthOffset: number, day: number): string {
  const s = artist.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/-+$/, '')
  const dt = d(monthOffset, day, 0)
  const y = dt.getFullYear()
  const m = String(dt.getMonth() + 1).padStart(2, '0')
  const dd = String(dt.getDate()).padStart(2, '0')
  return `${s}-${y}-${m}-${dd}`
}

function status(monthOffset: number, day: number): 'past' | 'upcoming' {
  if (monthOffset < 0) return 'past'
  if (monthOffset > 0) return 'upcoming'
  return day < today ? 'past' : 'upcoming'
}

const ts = new Date()

// ── Events (25 total) ───────────────────────────────────────────────────────
// 4 previous month · 15 current month · 6 next month

export const mockEvents: EventWithRelations[] = [
  // ─── Previous month (4 events) ────────────────────────────────────────────
  {
    id: 'e1',
    title: 'Viper!!',
    slug: slug('Viper', -1, 8),
    startTime: d(-1, 8, 20),
    endTime: d(-1, 8, 23),
    venueId: 'v3',
    venue: mockVenues[2],
    artistIds: ['a1'],
    artists: [mockArtists[0]],
    genreIds: ['g2'],
    genres: [mockGenres[1]],
    status: 'past',
    spotifyListeners: 123087,
    price: '150 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e2',
    title: 'Blazers',
    slug: slug('Blazers', -1, 12),
    startTime: d(-1, 12, 19),
    endTime: d(-1, 12, 22),
    venueId: 'v4',
    venue: mockVenues[3],
    artistIds: ['a2'],
    artists: [mockArtists[1]],
    genreIds: ['g1'],
    genres: [mockGenres[0]],
    status: 'past',
    price: '100 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e3',
    title: 'Koltrast Akustisk',
    slug: slug('Koltrast-Akustisk', -1, 18),
    startTime: d(-1, 18, 20),
    endTime: d(-1, 18, 22, 30),
    venueId: 'v2',
    venue: mockVenues[1],
    artistIds: ['a7'],
    artists: [mockArtists[6]],
    genreIds: ['g5'],
    genres: [mockGenres[4]],
    status: 'past',
    spotifyListeners: 34100,
    price: '120 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e4',
    title: 'Hästpansen Live',
    slug: slug('Hastpansen-Live', -1, 22),
    startTime: d(-1, 22, 21),
    endTime: d(-1, 22, 23, 30),
    venueId: 'v1',
    venue: mockVenues[0],
    artistIds: ['a5'],
    artists: [mockArtists[4]],
    genreIds: ['g6'],
    genres: [mockGenres[5]],
    status: 'past',
    spotifyListeners: 67300,
    price: '180 kr',
    createdAt: ts,
    updatedAt: ts,
  },

  // ─── Current month (15 events) ────────────────────────────────────────────
  {
    id: 'e5',
    title: 'Front 242',
    slug: slug('Front-242', 0, 1),
    startTime: d(0, 1, 19),
    endTime: d(0, 1, 21),
    venueId: 'v1',
    venue: mockVenues[0],
    artistIds: ['a4'],
    artists: [mockArtists[3]],
    genreIds: ['g2'],
    genres: [mockGenres[1]],
    status: status(0, 1),
    spotifyListeners: 150000,
    price: '200 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e6',
    title: 'Sheep Boi',
    slug: slug('Sheep-Boi', 0, 3),
    startTime: d(0, 3, 19),
    endTime: d(0, 3, 21),
    venueId: 'v5',
    venue: mockVenues[4],
    artistIds: ['a3'],
    artists: [mockArtists[2]],
    genreIds: ['g4'],
    genres: [mockGenres[3]],
    status: status(0, 3),
    spotifyListeners: 28500,
    price: '80 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e7',
    title: 'Dimma — Nattljus Tour',
    slug: slug('Dimma-Nattljus', 0, 5),
    startTime: d(0, 5, 20),
    endTime: d(0, 5, 23),
    venueId: 'v3',
    venue: mockVenues[2],
    artistIds: ['a6'],
    artists: [mockArtists[5]],
    genreIds: ['g2'],
    genres: [mockGenres[1]],
    status: status(0, 5),
    spotifyListeners: 91200,
    price: '250 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e8',
    title: 'Glasklart',
    slug: slug('Glasklart', 0, 7),
    startTime: d(0, 7, 19, 30),
    endTime: d(0, 7, 22),
    venueId: 'v2',
    venue: mockVenues[1],
    artistIds: ['a9'],
    artists: [mockArtists[8]],
    genreIds: ['g3'],
    genres: [mockGenres[2]],
    status: status(0, 7),
    spotifyListeners: 55600,
    price: '160 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e9',
    title: 'Svarta Björken',
    slug: slug('Svarta-Bjorken', 0, 9),
    startTime: d(0, 9, 20),
    endTime: d(0, 9, 22, 30),
    venueId: 'v4',
    venue: mockVenues[3],
    artistIds: ['a8'],
    artists: [mockArtists[7]],
    genreIds: ['g5'],
    genres: [mockGenres[4]],
    status: status(0, 9),
    spotifyListeners: 12800,
    price: '90 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e10',
    title: 'Eldkvarn — Klassiker',
    slug: slug('Eldkvarn-Klassiker', 0, 11),
    startTime: d(0, 11, 19),
    endTime: d(0, 11, 22),
    venueId: 'v3',
    venue: mockVenues[2],
    artistIds: ['a10'],
    artists: [mockArtists[9]],
    genreIds: ['g1'],
    genres: [mockGenres[0]],
    status: status(0, 11),
    spotifyListeners: 210000,
    price: '350 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e11',
    title: 'Viper!! — Club Night',
    slug: slug('Viper-Club-Night', 0, 13),
    startTime: d(0, 13, 22),
    endTime: d(0, 14, 2),
    venueId: 'v1',
    venue: mockVenues[0],
    artistIds: ['a1'],
    artists: [mockArtists[0]],
    genreIds: ['g2'],
    genres: [mockGenres[1]],
    status: status(0, 13),
    spotifyListeners: 123087,
    price: '180 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e12',
    title: 'Hästpansen x Dimma',
    slug: slug('Hastpansen-Dimma', 0, 15),
    startTime: d(0, 15, 19),
    endTime: d(0, 15, 23),
    venueId: 'v3',
    venue: mockVenues[2],
    artistIds: ['a5', 'a6'],
    artists: [mockArtists[4], mockArtists[5]],
    genreIds: ['g6', 'g2'],
    genres: [mockGenres[5], mockGenres[1]],
    status: status(0, 15),
    spotifyListeners: 67300,
    price: '220 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e13',
    title: 'Koltrast',
    slug: slug('Koltrast', 0, 17),
    startTime: d(0, 17, 20),
    endTime: d(0, 17, 22),
    venueId: 'v5',
    venue: mockVenues[4],
    artistIds: ['a7'],
    artists: [mockArtists[6]],
    genreIds: ['g5'],
    genres: [mockGenres[4]],
    status: status(0, 17),
    spotifyListeners: 34100,
    price: '100 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e14',
    title: 'Blazers — Comeback',
    slug: slug('Blazers-Comeback', 0, 19),
    startTime: d(0, 19, 19, 30),
    endTime: d(0, 19, 22),
    venueId: 'v1',
    venue: mockVenues[0],
    artistIds: ['a2'],
    artists: [mockArtists[1]],
    genreIds: ['g1'],
    genres: [mockGenres[0]],
    status: status(0, 19),
    spotifyListeners: 45200,
    price: '140 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e15',
    title: 'Jazz på Nefertiti',
    slug: slug('Jazz-Nefertiti', 0, 20),
    startTime: d(0, 20, 20),
    endTime: d(0, 20, 23),
    venueId: 'v2',
    venue: mockVenues[1],
    artistIds: ['a9'],
    artists: [mockArtists[8]],
    genreIds: ['g3'],
    genres: [mockGenres[2]],
    status: status(0, 20),
    spotifyListeners: 55600,
    price: '170 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e16',
    title: 'Sheep Boi — Indie Natt',
    slug: slug('Sheep-Boi-Indie', 0, 22),
    startTime: d(0, 22, 21),
    endTime: d(0, 22, 23, 30),
    venueId: 'v4',
    venue: mockVenues[3],
    artistIds: ['a3'],
    artists: [mockArtists[2]],
    genreIds: ['g4'],
    genres: [mockGenres[3]],
    status: status(0, 22),
    spotifyListeners: 28500,
    price: '90 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e17',
    title: 'Glasklart & Svarta Björken',
    slug: slug('Glasklart-Svarta-Bjorken', 0, 24),
    startTime: d(0, 24, 19),
    endTime: d(0, 24, 22, 30),
    venueId: 'v2',
    venue: mockVenues[1],
    artistIds: ['a9', 'a8'],
    artists: [mockArtists[8], mockArtists[7]],
    genreIds: ['g3', 'g5'],
    genres: [mockGenres[2], mockGenres[4]],
    status: status(0, 24),
    spotifyListeners: 55600,
    price: '190 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e18',
    title: 'Eldkvarn',
    slug: slug('Eldkvarn', 0, 26),
    startTime: d(0, 26, 19),
    endTime: d(0, 26, 22),
    venueId: 'v1',
    venue: mockVenues[0],
    artistIds: ['a10'],
    artists: [mockArtists[9]],
    genreIds: ['g1'],
    genres: [mockGenres[0]],
    status: status(0, 26),
    spotifyListeners: 210000,
    price: '300 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e19',
    title: 'Front 242 — Extended Set',
    slug: slug('Front-242-Extended', 0, 28),
    startTime: d(0, 28, 20),
    endTime: d(0, 28, 23, 30),
    venueId: 'v3',
    venue: mockVenues[2],
    artistIds: ['a4'],
    artists: [mockArtists[3]],
    genreIds: ['g2'],
    genres: [mockGenres[1]],
    status: status(0, 28),
    spotifyListeners: 150000,
    price: '250 kr',
    createdAt: ts,
    updatedAt: ts,
  },

  // ─── Next month (6 events) ────────────────────────────────────────────────
  {
    id: 'e20',
    title: 'Dimma — Studio Session',
    slug: slug('Dimma-Studio', 1, 3),
    startTime: d(1, 3, 19),
    endTime: d(1, 3, 21, 30),
    venueId: 'v5',
    venue: mockVenues[4],
    artistIds: ['a6'],
    artists: [mockArtists[5]],
    genreIds: ['g2'],
    genres: [mockGenres[1]],
    status: 'upcoming',
    spotifyListeners: 91200,
    price: '160 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e21',
    title: 'Hästpansen — Rap Kväll',
    slug: slug('Hastpansen-Rap', 1, 7),
    startTime: d(1, 7, 20),
    endTime: d(1, 7, 23),
    venueId: 'v1',
    venue: mockVenues[0],
    artistIds: ['a5'],
    artists: [mockArtists[4]],
    genreIds: ['g6'],
    genres: [mockGenres[5]],
    status: 'upcoming',
    spotifyListeners: 67300,
    price: '200 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e22',
    title: 'Viper!! x Blazers',
    slug: slug('Viper-Blazers', 1, 12),
    startTime: d(1, 12, 19, 30),
    endTime: d(1, 12, 23),
    venueId: 'v3',
    venue: mockVenues[2],
    artistIds: ['a1', 'a2'],
    artists: [mockArtists[0], mockArtists[1]],
    genreIds: ['g2', 'g1'],
    genres: [mockGenres[1], mockGenres[0]],
    status: 'upcoming',
    spotifyListeners: 123087,
    price: '280 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e23',
    title: 'Koltrast — Vårturné',
    slug: slug('Koltrast-Varturne', 1, 16),
    startTime: d(1, 16, 20),
    endTime: d(1, 16, 22),
    venueId: 'v2',
    venue: mockVenues[1],
    artistIds: ['a7'],
    artists: [mockArtists[6]],
    genreIds: ['g5'],
    genres: [mockGenres[4]],
    status: 'upcoming',
    spotifyListeners: 34100,
    price: '130 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e24',
    title: 'Svarta Björken Unplugged',
    slug: slug('Svarta-Bjorken-Unplugged', 1, 20),
    startTime: d(1, 20, 19),
    endTime: d(1, 20, 21),
    venueId: 'v4',
    venue: mockVenues[3],
    artistIds: ['a8'],
    artists: [mockArtists[7]],
    genreIds: ['g4'],
    genres: [mockGenres[3]],
    status: 'upcoming',
    spotifyListeners: 12800,
    price: '90 kr',
    createdAt: ts,
    updatedAt: ts,
  },
  {
    id: 'e25',
    title: 'Eldkvarn — Avskedsturné',
    slug: slug('Eldkvarn-Avskedsturne', 1, 25),
    startTime: d(1, 25, 18),
    endTime: d(1, 25, 22),
    venueId: 'v3',
    venue: mockVenues[2],
    artistIds: ['a10'],
    artists: [mockArtists[9]],
    genreIds: ['g1'],
    genres: [mockGenres[0]],
    status: 'upcoming',
    spotifyListeners: 210000,
    price: '400 kr',
    createdAt: ts,
    updatedAt: ts,
  },
]

// ── Helper functions ────────────────────────────────────────────────────────

export function getEventsByMonth(yearNum: number, monthNum: number): EventWithRelations[] {
  return mockEvents.filter((event) => {
    const start = new Date(event.startTime)
    return start.getFullYear() === yearNum && start.getMonth() === monthNum - 1
  })
}

export function getEventBySlug(eventSlug: string): EventWithRelations | undefined {
  return mockEvents.find((event) => event.slug === eventSlug)
}

export function getAllVenues(): Venue[] {
  return mockVenues
}

export function getAllGenres(): Genre[] {
  return mockGenres
}
